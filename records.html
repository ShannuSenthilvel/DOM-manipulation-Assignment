<!DOCTYPE html>
<html>
<head>
    <title>Student Records</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>

    body {
         font-family: sans-serif;
        padding: 20px;
        margin: 0;
        padding: 0;
        }

        main.content { /* Added wrapper */
    padding: 20px;
    min-height: 100vh; /* Ensure the content takes up at least the full viewport height */
    position: relative; /* important to hold the footer */
}

/*............................................... Navigation Bar Styling .............................................*/
.hamburger-icon {
  position: fixed;
  z-index: 1;
  top: 5vh;
  left: 5vw;
  padding-bottom: 2vh;
}

.hamburger-icon span {
  height: 5px;
  width: 40px;
  background-color: black;
  display: block;
  margin: 5px 0px 5px 0px;
  transition: 0.7s ease-in-out;
  transform: none;
}

#openmenu:checked ~ .menu-pane {
  left: -5vw;
  transform: translateX(-5vw);
}

#openmenu:checked ~ .body-text {
display: none;
}

#openmenu:checked ~ .hamburger-icon span:nth-of-type(2) {
  transform: translate(0%, 175%) rotate(-45deg);
  background-color: black;
}

#openmenu:checked ~ .hamburger-icon span:nth-of-type(3) {
  transform: rotate(45deg);
  background-color: black;
}

#openmenu:checked ~ .hamburger-icon span:nth-of-type(1) {
  opacity: 0;
}

#openmenu:checked ~ .hamburger-icon span:nth-of-type(4) {
  opacity: 0;
}


div.menu-pane {
    background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3));
    position: fixed;
    transform: translateX(-105vw);
    transform-origin: 0 0;
    width: 100vw;
    height: 100vh;
    z-index: 2;
    transition: 0.6s ease-in-out;
    top: 0; 
    left: 0; 
}

.menu-pane nav {
  padding: 10%;
  margin-left: 25%;
}


.menu-links li, a, span {
      transition: all 0.5s ease-in-out;
}
.menu-links li a {
    display: flex;
    align-items: center; 
    position: relative; 
    text-decoration: none;
    color: black;
}

.menu-links li a img {
  height: 70px;
  width: 60px;
  margin-right: 10px;
}

.menu-links li a span {
    position: absolute;
    left: -100%; 
    white-space: nowrap; 
    transition: left 0.3s ease; 
}

.menu-links li a:hover span {
    left: 60px; 
    color: rgb(94, 94, 248); 
    font-size: large;
    
}
.menu-pane ul {
  margin-left: 5%;
  padding: 5%;
  display: inline-block;
}
.menu-pane li {
  padding-top: 5px;
  padding-bottom: 20px;
  margin-left: 10px;
  font-size: 1em;
  list-style: none;
  
}
.menu-links li a {
    color: black;
    text-decoration: none;
}

.menu-links li:hover span {
    color: black;
    display: block;
    margin: 20%;
} 

input.hamburger-checkbox {
  position: absolute;
  z-index: 3;
  top: 5vh;
  left: 5vw;
  width: 10vw;
  opacity: 0;
  height: 6vh;
}

/* ---------------------------------------------Student Records table styling-------------------------------------------------------- */
        table {
            width: 70%;
            border-collapse: collapse;
            margin: 80px auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: #112431;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #e8f5ff;
        }
/*------------------------------------------------Display Modal styling-------------------------------------------------------*/
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        #modalStudentDetails {
            flex: 1;
            line-height: 1.5;
        }

        .modal-image {
            position: absolute;
            top: 30px;
            right: 20px;
        }

        .modal-image img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            object-fit: cover;
        }

        .progress-container {
            width: 40%;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 20px;
            background-color: #4CAF50;
            border-radius: 5px;
            width: 0;
            transition: width 1s ease-in-out;
        }

        .animated-progress {
            will-change: width;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: rgb(241, 141, 141);
            text-decoration: none;
        }

        button {
            background-color: #27ae60;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 2px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #219653;
        }
/*..........................................................Footer styling...................................................................*/

footer {
    position: static;
    width: 100%;
    overflow: hidden;
    text-align: center;
    padding-top: 50px; 
    height: 250px;
    color: #fff;
}

.wave-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%; /* Cover the entire footer */
    overflow: hidden;
}

.wave {
    position: absolute;
    width: 200%;
    height: 100%;
    bottom: 0;
    animation: wave 4s linear infinite;
    clip-path: polygon(0% 40%, 25% 50%, 50% 40%, 75% 30%, 100% 40%, 100% 100%, 0% 100%);
    background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.3)); 
}

@keyframes wave {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%);
    }
}

.footer-content {
    position: relative;
    z-index: 10;
}

.social-icons {
    margin-top: 70px;
}

.social-icons .icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background-color: #555;
    color: #fff;
    border-radius: 50%;
    margin: 0 10px;
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.social-icons .icon:hover {
    background-color: #007bff;
    transform: scale(1.1);
}

.social-icons .icon i {
    font-size: 1.2em;
}

footer p {
    font-size: 0.9em;
}
</style>
</head>
<body>
    <header>
        <div class="menu-container">
  
            <input type="checkbox" id="openmenu" class="hamburger-checkbox">
            
            <div class="hamburger-icon">
              <label for="openmenu" id="hamburger-label">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
              </label>    
            </div>
          
              <div class="menu-pane">
                <nav>
                  <ul class="menu-links">
                      <li ><a href="./register.html"><img src="./images/registration.png"><span>Register</span></a></li>
                      <li><a href="./records.html"><img src="./images/user.png"><span>Records</span></a></li>
                      <li ><a href="./about.html"><img src="./images/information.png"><span>About us</span></a></li>
                      <li ><a href="./contact.html"><img src="./images/information-channels.png"><span>Contact us</span></a></li>
                  </ul>
              </nav>
              </div>
    </header>
    <main class="content">
        <table id="student-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Register No</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    
        <div id="noRecordsMessage" style="display: none; text-align: center; margin-top: 20px;">
            No records found.
        </div>
    
        <div id="studentModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="modalStudentDetails"></div>
            </div>
        </div>
        <footer>
            <div class="wave-container">
                <div class="wave wave1"></div>
                <div class="wave wave2"></div>
                <div class="wave wave3"></div>
            </div>
            <div class="footer-content">
                <div class="social-icons">
                    <a href="#" class="icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="icon"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="icon"><i class="fab fa-youtube"></i></a>
                </div>
                <p>&copy|Copyright information 2025</p>
            </div>
        </footer>
    </main>
 
       

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const students = JSON.parse(localStorage.getItem('students')) || [];
            console.log(students);
            const tableBody = document.querySelector('#student-table tbody');
            const modal = document.getElementById('studentModal');
            const modalDetails = document.getElementById('modalStudentDetails');
            const closeBtn = document.querySelector('.close');
            const noRecordsMessage = document.getElementById('noRecordsMessage');

            if (!tableBody) {
                console.error("student-table tbody not found!");
                return;
            }

            if (students.length === 0) {
                noRecordsMessage.style.display = 'block';
            } else {
                students.forEach((student, index) => {
                    const row = document.createElement('tr');

                    row.innerHTML = `
    <td>${student.fname}</td>
    <td>${student.regno}</td>
    <td>
        <button onclick="window.editStudent(${index})"><i class="fas fa-edit"></i></button>
        <button onclick="window.viewStudent(${index})"><i class="fas fa-eye"></i></button>
        <button onclick="window.deleteStudent(${index})"><i class="fas fa-trash-alt"></i></button>
    </td>
`;

                    tableBody.appendChild(row);
                });
            }

            window.viewStudent = function(index) {
                const student = students[index];

                if (student) {
                    let skillsHtml = '';

                    const skillLevelNames = {
                        1: 'Beginner',
                        2: 'Novice',
                        3: 'Intermediate',
                        4: 'Advanced',
                        5: 'Expert'
                    };

                    for (const skillName in student.skills) {
                        const skillValues = student.skills[skillName];
                        let progressPercentage = 0;
                        let levelName = 'None';

                        if (skillValues && skillValues.length > 0) {
                            const maxLevel = Math.max(...skillValues);
                            progressPercentage = (maxLevel / 5) * 100;
                            levelName = skillLevelNames[maxLevel];
                        }

                        skillsHtml += `
                            <p><strong>${skillName}:</strong> ${levelName}</p>
                            <div class="progress-container">
                                <div class="progress-bar animated-progress" style="width: 0%;"></div>
                            </div>
                        `;
                    }
                    modalDetails.innerHTML = `
                        <p><strong>Name:</strong> ${student.fname}</p>
                        <p><strong>Register No:</strong> ${student.regno}</p>
                        <p><strong>Email:</strong> ${student.mail}</p>
                        <p><strong>Phone:</strong> ${student.phone}</p>
                        <p><strong>Address:</strong> ${student.addr}</p>
                        <p><strong>College:</strong> ${student.college}</p>
                        <p><strong>Degree:</strong> ${student.degree}</p>
                        <p><strong>Github:</strong> ${student.github}</p>
                        <p><strong>Father:</strong> ${student.father}</p>
                        <p><strong>Mother:</strong> ${student.mother}</p>
                        <p><strong>Emergency Contact:</strong> ${student.emergency_contact}</p>
                        ${skillsHtml}
                        ${student.image ? `<div class="modal-image"><img src="${student.image}" style="max-width: 200px; max-height: 200px;"></div>` : ''}
                    `;
                    modal.style.display = "block";

        setTimeout(() => {
            const progressBars = document.querySelectorAll('.animated-progress');
            progressBars.forEach((bar, skillIndex) => {
                const skillValues = Object.values(student.skills)[skillIndex];
                let progressPercentage = 0;
                if(skillValues){
                    const maxLevel = Math.max(...skillValues);
                    progressPercentage = (maxLevel / 5) * 100;
                }
                bar.style.width = `${progressPercentage}%`;
            });
        }, 10); // Small delay
    }
            };
    
            window.editStudent = function(index) { // Attach to window
                console.log("Edit student at index:", index);
                localStorage.setItem('editIndex', index);
                window.location.href = 'editdetails.html';
            };
    
            window.deleteStudent = function(index) { // Attach to window
                console.log("Delete student at index:", index);
                students.splice(index, 1);
                localStorage.setItem('students', JSON.stringify(students));
                location.reload();
            };
    
            closeBtn.onclick = function() {
                modal.style.display = "none";
            };
    
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            };
        });
    </script>


</body>

</html>